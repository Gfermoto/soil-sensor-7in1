# JXCT Soil Sensor v2.2.1

IoT —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—á–≤—ã –Ω–∞ ESP32 —Å –¥–∞—Ç—á–∏–∫–æ–º JXCT 7-–≤-1 (Modbus RTU).

## üöÄ **–ù–æ–≤–æ–µ –≤ v2.2.1 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤:**
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ 100 —Ä–∞–∑:** MQTT –ø—É–±–ª–∏–∫–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω –≤–º–µ—Å—Ç–æ 3 —Å–µ–∫
- **–î–µ–ª—å—Ç–∞-—Ñ–∏–ª—å—Ç—Ä:** –ø—É–±–ª–∏–∫–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–Ω–∞—á–∏–º—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö (¬±0.5¬∞C, ¬±2%, ¬±0.1pH)
- **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—É–±–ª–∏–∫–∞—Ü–∏—è:** –∫–∞–∂–¥—ã–π —á–∞—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∞—Ç—á–∏–∫–∞:** –æ–ø—Ä–æ—Å –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫ –≤–º–µ—Å—Ç–æ 5 —Å–µ–∫ (—ç–∫–æ–Ω–æ–º–∏—è CPU)

## üå± –ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ—á–≤—ã
- –í–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ—á–≤—ã  
- –≠–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç—å (EC)
- pH —É—Ä–æ–≤–µ–Ω—å
- NPK (–ê–∑–æ—Ç, –§–æ—Å—Ñ–æ—Ä, –ö–∞–ª–∏–π)

## ‚ö° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **WiFi –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ AP/STA —Ä–µ–∂–∏–º–æ–≤
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- **MQTT –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±—Ä–æ–∫–µ—Ä
- **Home Assistant** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤
- **ThingSpeak** - –∑–∞–≥—Ä—É–∑–∫–∞ –≤ –æ–±–ª–∞–∫–æ
- **REST API** - JSON endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

## üîß –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- ESP32-DevKit (–ª—é–±–æ–π —Å 4MB Flash)
- –î–∞—Ç—á–∏–∫ JXCT 7-–≤-1 Soil Sensor  
- MAX485 –º–æ–¥—É–ª—å –¥–ª—è RS485
- –ü—Ä–æ–≤–æ–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üì¶ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```
ESP32        MAX485       JXCT Sensor
GPIO16  -->  RO           
GPIO17  -->  DI           
GPIO4   -->  DE/RE        
3.3V    -->  VCC          
GND     -->  GND          
         A+  ---------->  A+
         B-  ---------->  B-
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ—à–∏–≤–∫–∞
```bash
git clone https://github.com/your-repo/jxct-soil-sensor
cd jxct-soil-sensor
pio run -t upload
```

### 2. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
1. ESP32 —Å–æ–∑–¥–∞—Å—Ç WiFi —Å–µ—Ç—å `jxct-XXXXXX` —Å –ø–∞—Ä–æ–ª–µ–º `12345678`
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://192.168.4.1`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WiFi, MQTT, ThingSpeak
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –¥–æ–º–∞—à–Ω–µ–π WiFi:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `http://[IP-–∞–¥—Ä–µ—Å]/`  
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `http://[IP-–∞–¥—Ä–µ—Å]/readings`
- API –¥–∞–Ω–Ω—ã—Ö: `http://[IP-–∞–¥—Ä–µ—Å]/api/sensor`

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant

–î–æ–±–∞–≤—å—Ç–µ –≤ `configuration.yaml`:
```yaml
mqtt:
  sensor:
    - name: "Soil Temperature"  
      state_topic: "homeassistant/sensor/jxct_soil/temperature/state"
      unit_of_measurement: "¬∞C"
    - name: "Soil Humidity"
      state_topic: "homeassistant/sensor/jxct_soil/humidity/state"  
      unit_of_measurement: "%"
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏
```

–ò–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ MQTT Discovery –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö - –¥–∞—Ç—á–∏–∫–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üìä API

### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞
```bash
curl http://192.168.1.100/api/sensor
```

```json
{
  "temperature": 23.7,
  "humidity": 54.4,
  "ec": 1200,
  "ph": 6.8,
  "nitrogen": 15,
  "phosphorus": 8,
  "potassium": 20,
  "timestamp": 1717920000,
  "valid": true
}
```

### –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```bash
curl http://192.168.1.100/health
```

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [`docs/API.md`](docs/API.md)

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PlatformIO
- ESP32 Arduino Framework

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏:**
- `esp32dev` - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- `esp32dev-production` - –ø—Ä–æ–¥–∞–∫—à–Ω —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pio run -e esp32dev -t upload -t monitor

# –ü—Ä–æ–¥–∞–∫—à–Ω  
pio run -e esp32dev-production -t upload
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å v2.2.1
- **Flash:** 878KB (44.7%) - +1.4KB –∑–∞ –¥–µ–ª—å—Ç–∞-—Ñ–∏–ª—å—Ç—Ä
- **RAM:** 52.8KB (16.1%) - +32 –±–∞–π—Ç–∞ –∑–∞ –Ω–æ–≤—ã–µ –ø–æ–ª—è
- **–°–≤–æ–±–æ–¥–Ω–∞—è –ø–∞–º—è—Ç—å:** 230KB+ (—Å—Ç–∞–±–∏–ª—å–Ω–æ)
- **Uptime:** 37+ –º–∏–Ω—É—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- **–≠–∫–æ–Ω–æ–º–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞:** MQTT –≤ 100 —Ä–∞–∑, ThingSpeak –≤ 60 —Ä–∞–∑

## üóìÔ∏è –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
–°–º. [`docs/DEVELOPMENT_ROADMAP_2025.md`](docs/DEVELOPMENT_ROADMAP_2025.md)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License 
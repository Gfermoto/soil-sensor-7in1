# JXCT Soil Sensor v2.4.2

IoT —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø–æ—á–≤—ã –Ω–∞ ESP32 —Å –¥–∞—Ç—á–∏–∫–æ–º JXCT 7-–≤-1 (Modbus RTU).

## üöÄ **–ù–æ–≤–æ–µ –≤ v2.4.2 - –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ OTA:**
- **–§–∏–ª—å—Ç—Ä –≤—ã–±—Ä–æ—Å–æ–≤ >2œÉ:** –°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π  
- **–ê–ª–≥–æ—Ä–∏—Ç–º –º–µ–¥–∏–∞–Ω—ã:** –í—ã–±–æ—Ä –º–µ–∂–¥—É —Å—Ä–µ–¥–Ω–∏–º –∏ –º–µ–¥–∏–∞–Ω–æ–π –¥–ª—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –≤—ã–±—Ä–æ—Å–∞–º
- **–í–µ–±-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ OTA:** –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –≤—ã–∑–æ–≤—ã, –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## üîß **–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ OTA v2.5.0:**
- ‚úÖ **–ü–∞–º—è—Ç—å:** 1.1MB —Å–≤–æ–±–æ–¥–Ω–æ (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è OTA partition)
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –£–±—Ä–∞–Ω—ã –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ delay(), watchdog –≥–æ—Ç–æ–≤
- ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã, –º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å —É–ª—É—á—à–µ–Ω–∞

## üå± –ß—Ç–æ –∏–∑–º–µ—Ä—è–µ—Ç
- –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ—á–≤—ã
- –í–ª–∞–∂–Ω–æ—Å—Ç—å –ø–æ—á–≤—ã  
- –≠–ª–µ–∫—Ç—Ä–æ–ø—Ä–æ–≤–æ–¥–Ω–æ—Å—Ç—å (EC)
- pH —É—Ä–æ–≤–µ–Ω—å
- NPK (–ê–∑–æ—Ç, –§–æ—Å—Ñ–æ—Ä, –ö–∞–ª–∏–π)

## ‚ö° –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
- **WiFi –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ AP/STA —Ä–µ–∂–∏–º–æ–≤
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
- **MQTT –ø—É–±–ª–∏–∫–∞—Ü–∏—è** - –æ—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±—Ä–æ–∫–µ—Ä
- **Home Assistant** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–æ–≤
- **ThingSpeak** - –∑–∞–≥—Ä—É–∑–∫–∞ –≤ –æ–±–ª–∞–∫–æ
- **REST API** - JSON endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

## üîß –û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ
- ESP32-DevKit (–ª—é–±–æ–π —Å 4MB Flash)
- –î–∞—Ç—á–∏–∫ JXCT 7-–≤-1 Soil Sensor  
- MAX485 –º–æ–¥—É–ª—å –¥–ª—è RS485
- –ü—Ä–æ–≤–æ–¥–∞ –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üì¶ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
```
ESP32        MAX485       JXCT Sensor
GPIO16  -->  RO           
GPIO17  -->  DI           
GPIO4   -->  DE/RE        
3.3V    -->  VCC          
GND     -->  GND          
         A+  ---------->  A+
         B-  ---------->  B-
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–æ—à–∏–≤–∫–∞
```bash
git clone https://github.com/your-repo/jxct-soil-sensor
cd jxct-soil-sensor
pio run -t upload
```

### 2. –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
1. ESP32 —Å–æ–∑–¥–∞—Å—Ç WiFi —Å–µ—Ç—å `jxct-XXXXXX` —Å –ø–∞—Ä–æ–ª–µ–º `12345678`
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∏ –æ—Ç–∫—Ä–æ–π—Ç–µ `http://192.168.4.1`
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ WiFi, MQTT, ThingSpeak
4. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏"

### 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
–ü–æ—Å–ª–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –¥–æ–º–∞—à–Ω–µ–π WiFi:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏: `http://[IP-–∞–¥—Ä–µ—Å]/`  
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥: `http://[IP-–∞–¥—Ä–µ—Å]/readings`
- API –¥–∞–Ω–Ω—ã—Ö: `http://[IP-–∞–¥—Ä–µ—Å]/api/sensor`

## üîå –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Home Assistant

–î–æ–±–∞–≤—å—Ç–µ –≤ `configuration.yaml`:
```yaml
mqtt:
  sensor:
    - name: "Soil Temperature"  
      state_topic: "homeassistant/sensor/jxct_soil/temperature/state"
      unit_of_measurement: "¬∞C"
    - name: "Soil Humidity"
      state_topic: "homeassistant/sensor/jxct_soil/humidity/state"  
      unit_of_measurement: "%"
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∏
```

–ò–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ MQTT Discovery –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö - –¥–∞—Ç—á–∏–∫–∏ –¥–æ–±–∞–≤—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

## üìä API

### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞
```bash
curl http://192.168.1.100/api/sensor
```

```json
{
  "temperature": 23.7,
  "humidity": 54.4,
  "ec": 1200,
  "ph": 6.8,
  "nitrogen": 15,
  "phosphorus": 8,
  "potassium": 20,
  "timestamp": 1717920000,
  "valid": true
}
```

### –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
```bash
curl http://192.168.1.100/health
```

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API: [`docs/API.md`](docs/API.md)

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PlatformIO
- ESP32 Arduino Framework

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏:**
- `esp32dev` - —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –ø–æ–ª–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- `esp32dev-production` - –ø—Ä–æ–¥–∞–∫—à–Ω —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π

```bash
# –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
pio run -e esp32dev -t upload -t monitor

# –ü—Ä–æ–¥–∞–∫—à–Ω  
pio run -e esp32dev-production -t upload
```

## üìà –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å v2.4.2
- **Flash:** 916KB (46.6%) - —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **RAM:** 53KB (16.2%) - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏
- **–°–≤–æ–±–æ–¥–Ω–æ –¥–ª—è OTA:** 1.1MB (–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è partition + –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –£–±—Ä–∞–Ω—ã –≤—Å–µ –±–ª–æ–∫–∏—Ä—É—é—â–∏–µ delay(), –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ OTA
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:** –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã, –∫–æ–¥ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω –∫ –º–æ–¥—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏

## üóìÔ∏è –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è
–°–º. [`docs/DEVELOPMENT_ROADMAP_2025.md`](docs/DEVELOPMENT_ROADMAP_2025.md)

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License 
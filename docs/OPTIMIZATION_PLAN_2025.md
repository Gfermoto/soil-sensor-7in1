# üöÄ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ JXCT v2.0.1

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 10 –∏—é–Ω—è 2025  
**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 10 –∏—é–Ω—è 2025  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 2.0.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ó–ê–í–ï–†–®–ï–ù** - –í—Å–µ —Ü–µ–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω—ã  

---

## üìã –ö—Ä–∞—Ç–∫–æ–µ —Ä–µ–∑—é–º–µ

‚úÖ **–ó–ê–í–ï–†–®–ï–ù** –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ø–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ JXCT Soil Sensor:
- ‚ö° **–ü–æ–≤—ã—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ 30-50%** *(—Ü–µ–ª—å 30-40% - –ü–†–ï–í–´–®–ï–ù–ê)*
- üíæ **–≠–∫–æ–Ω–æ–º–∏—è RAM +18KB** *(—Ü–µ–ª—å 40-60KB - —á–∞—Å—Ç–∏—á–Ω–æ –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞)*
- üì¶ **–°–æ–∫—Ä–∞—â–µ–Ω–∏–µ Flash -34KB –≤ release** *(—Ü–µ–ª—å 15-25KB - –ü–†–ï–í–´–®–ï–ù–ê)*
- üéØ **FreeRTOS —Ç–æ—á–Ω–æ—Å—Ç—å +90%** *(1ms tick –≤–º–µ—Å—Ç–æ 10ms)*
- üîß **2 –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** –¥–ª—è dev –∏ production

---

## üéØ –¶–µ–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üìä –¢–µ–∫—É—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (–æ—Ü–µ–Ω–æ—á–Ω—ã–µ):
- **RAM:** ~180-220KB –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **Flash:** ~800KB-1.2MB –ø—Ä–æ—à–∏–≤–∫–∞
- **CPU:** ~40-60% –Ω–∞–≥—Ä—É–∑–∫–∞ –≤ –ø–∏–∫–∞—Ö
- **–≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:** ~150-200mA –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ

### üéØ –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **RAM:** ~120-160KB (-40-60KB)
- **Flash:** ~680-950KB (-120-250KB)
- **CPU:** ~25-40% –Ω–∞–≥—Ä—É–∑–∫–∞ (-15-20%)
- **–≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:** ~100-140mA (-50-60mA)

---

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)

### 1. ‚úÖ **–ó–∞–º–µ–Ω–∞ String –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** 45+ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π String –∫–ª–∞—Å—Å–∞
**–≠—Ñ—Ñ–µ–∫—Ç:** -20-40KB RAM, +20-30% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏  
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –≠–∫–æ–Ω–æ–º–∏—è ~18KB RAM, +15-25% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –¶–µ–ª–µ–≤—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/thingspeak_client.cpp` (7+ String conversions) - **–ì–û–¢–û–í–û**
- ‚úÖ `src/mqtt_client.cpp` (25+ String –æ–ø–µ—Ä–∞—Ü–∏–π) - **–ì–û–¢–û–í–û**
- ‚è≥ `src/wifi_manager.cpp` (35+ String –æ–±—ä–µ–∫—Ç–æ–≤) - *–ß–∞—Å—Ç–∏—á–Ω–æ* (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω—ã)

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// ‚ùå –ü–ª–æ—Ö–æ - String (—Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∞–º—è—Ç–∏)
String json = "{\"temperature\":" + String(temp) + "}";

// ‚úÖ –•–æ—Ä–æ—à–æ - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –±—É—Ñ–µ—Ä
char json_buffer[256];
snprintf(json_buffer, sizeof(json_buffer), 
         "{\"temperature\":%.2f}", temp);
```

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **8-12 —á–∞—Å–æ–≤**

---

### 2. ‚úÖ **–£—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** 40+ Serial.printf() –≤ production –∫–æ–¥–µ
**–≠—Ñ—Ñ–µ–∫—Ç:** -5-10KB Flash, +15-20% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –≠–∫–æ–Ω–æ–º–∏—è 3.3KB Flash, —Å–∏—Å—Ç–µ–º–∞ –º–∞–∫—Ä–æ—Å–æ–≤

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// –î–æ–±–∞–≤–∏—Ç—å –≤ main.h
#ifdef DEBUG_MODE
  #define DEBUG_PRINT(x) Serial.printf(x)
  #define DEBUG_PRINTLN(x) Serial.println(x)
#else
  #define DEBUG_PRINT(x)
  #define DEBUG_PRINTLN(x)
#endif

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
DEBUG_PRINT("Sensor reading: %.2f", temperature);
```

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **2-4 —á–∞—Å–∞**

---

### 3. ‚úÖ **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** vTaskDelay(100ms) –≤ main loop
**–≠—Ñ—Ñ–µ–∫—Ç:** +25-35% –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏ –Ω–∞ 35-40%

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// ‚ùå –ü–ª–æ—Ö–æ - –±–ª–æ–∫–∏—Ä—É—é—â–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞
vTaskDelay(pdMS_TO_TICKS(100));

// ‚úÖ –•–æ—Ä–æ—à–æ - –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π —Ç–∞–π–º–µ—Ä
static unsigned long lastSensorRead = 0;
if (millis() - lastSensorRead >= 100) {
    // –í—ã–ø–æ–ª–Ω–∏—Ç—å —á—Ç–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞
    lastSensorRead = millis();
}
```

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **4-6 —á–∞—Å–æ–≤**

---

## üü° –í–∞–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2)

### 4. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
**–≠—Ñ—Ñ–µ–∫—Ç:** -24KB Flash
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –≠–∫–æ–Ω–æ–º–∏—è Flash 24KB

#### –†–µ—à–µ–Ω–∏–µ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ `-ffunction-sections -fdata-sections`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω –ª–∏–Ω–∫–µ—Ä —Ñ–ª–∞–≥ `-Wl,--gc-sections` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∞ –æ—Ç–ª–∞–¥–∫–∞ Arduino Core
- ‚úÖ –£–¥–∞–ª–µ–Ω –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ñ–∞–π–ª `eagle.flash.4m1m.ld`

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **2 —á–∞—Å–∞**

---

### 5. ‚úÖ **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–≠—Ñ—Ñ–µ–∫—Ç:** –≠–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏ + –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å –±–∏—Ç–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - —É–ø–∞–∫–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –±–∏—Ç–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏
struct __attribute__((packed)) {
    uint8_t hassEnabled       : 1;  // 1 –±–∏—Ç –≤–º–µ—Å—Ç–æ 1 –±–∞–π—Ç–∞
    uint8_t useRealSensor     : 1;  // 1 –±–∏—Ç –≤–º–µ—Å—Ç–æ 1 –±–∞–π—Ç–∞
    uint8_t mqttEnabled       : 1;  // 1 –±–∏—Ç –≤–º–µ—Å—Ç–æ 1 –±–∞–π—Ç–∞
    uint8_t thingSpeakEnabled : 1;  // 1 –±–∏—Ç –≤–º–µ—Å—Ç–æ 1 –±–∞–π—Ç–∞
    uint8_t reserved          : 4;  // –†–µ–∑–µ—Ä–≤ –¥–ª—è –±—É–¥—É—â–∏—Ö —Ñ–ª–∞–≥–æ–≤
} flags;
```

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚úÖ –Ø–≤–Ω—ã–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–ª—è –±–∏—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –£–±—Ä–∞–Ω –æ–ø–∞—Å–Ω—ã–π `memset()` —Å —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **3 —á–∞—Å–∞**

---

### 6. ‚úÖ **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏ —á—Ç–µ–Ω–∏—è
**–≠—Ñ—Ñ–µ–∫—Ç:** +10-20% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 10.06.2025** - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - –∫—ç—à Home Assistant –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
struct HomeAssistantConfigCache {
    char tempConfig[512];
    char humConfig[512];
    // ... 7 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –ø–æ 512 –±–∞–π—Ç
    bool isValid;
} haConfigCache;

// ‚úÖ –ö—ç—à JSON –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–∞ —Å –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º
static char cachedSensorJson[256] = "";
static unsigned long lastCachedSensorTime = 0;

// ‚úÖ –ö—ç—à MQTT —Ç–æ–ø–∏–∫–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏
static char pubTopicCache[7][128];
```

#### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ **MQTT –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** +70% –±—ã—Å—Ç—Ä–µ–µ (–∫—ç—à JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π)
- ‚úÖ **–ü—É–±–ª–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** +15% –±—ã—Å—Ç—Ä–µ–µ (–∫—ç—à JSON –¥–∞—Ç—á–∏–∫–∞)  
- ‚úÖ **CPU –Ω–∞–≥—Ä—É–∑–∫–∞:** -20% (–º–µ–Ω—å—à–µ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏)
- ‚úÖ **–ü–∞–º—è—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è:** -50% (—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã –≤–º–µ—Å—Ç–æ String)
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:** –í—ã—à–µ (–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏)

#### –ó–∞—Ç—Ä–∞—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:
- **RAM:** +5KB (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å/–ø–∞–º—è—Ç—å)
- **Flash:** –°—Ç–∞–±–∏–ª–µ–Ω (+136 –±–∞–π—Ç dev, -40 –±–∞–π—Ç release)

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **4 —á–∞—Å–∞**

---

## üü¢ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3)

### 7. üéõÔ∏è **–§–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞**
```ini
# platformio.ini –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
build_flags = 
    -Os                    # –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–∞
    -ffunction-sections    # –°–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
    -fdata-sections        # –°–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
    -Wl,--gc-sections      # –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –∫–æ–¥–∞
    -DCORE_DEBUG_LEVEL=0   # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏ Arduino Core
    -DDEBUG_ESP_PORT=      # –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏ ESP
```

---

### 8. ‚úÖ **–°–µ—Ç–µ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - **–í–´–ü–û–õ–ù–ï–ù–û**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ò–∑–±—ã—Ç–æ—á–Ω—ã–π —Å–µ—Ç–µ–≤–æ–π —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ DNS –∑–∞–ø—Ä–æ—Å—ã
**–≠—Ñ—Ñ–µ–∫—Ç:** +30-40% —Å–µ—Ç–µ–≤–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
**–°—Ç–∞—Ç—É—Å:** üéØ **–ó–ê–í–ï–†–®–ï–ù–û 11.06.2025** - –ó–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞

#### –†–µ—à–µ–Ω–∏–µ:
```cpp
// ‚úÖ –§–∞–∑–∞ 3.1: –°–∂–∞—Ç–∏–µ MQTT payload (—Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–µ JSON –∫–ª—é—á–∏)
doc["t"] = temperature;    // –±—ã–ª–æ "temperature" ‚Üí —ç–∫–æ–Ω–æ–º–∏—è 10 –±–∞–π—Ç
doc["h"] = humidity;       // –±—ã–ª–æ "humidity" ‚Üí —ç–∫–æ–Ω–æ–º–∏—è 7 –±–∞–π—Ç
doc["r"] = phosphorus;     // –±—ã–ª–æ "phosphorus" ‚Üí —ç–∫–æ–Ω–æ–º–∏—è 9 –±–∞–π—Ç
// –ò—Ç–æ–≥–æ: 140 –±–∞–π—Ç ‚Üí 92 –±–∞–π—Ç (-34% —Ä–∞–∑–º–µ—Ä–∞)

// ‚úÖ –§–∞–∑–∞ 3.2: –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö
static bool pendingMqttPublish = false;
static bool pendingThingspeakPublish = false;
// MQTT: –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫, ThingSpeak: –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫

// ‚úÖ –§–∞–∑–∞ 3.3: DNS –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ (TTL 5 –º–∏–Ω—É—Ç)
struct DNSCache {
    char hostname[64];
    IPAddress cachedIP;
    unsigned long cacheTime;
    bool isValid;
} dnsCacheMqtt;
```

#### –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- ‚úÖ **MQTT payload:** -34% —Ä–∞–∑–º–µ—Ä–∞ (140‚Üí92 –±–∞–π—Ç)
- ‚úÖ **–°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:** -40-60% (–±–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ **DNS –∑–∞–ø—Ä–æ—Å—ã:** -95% (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ 5 –º–∏–Ω)
- ‚úÖ **–í—Ä–µ–º—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:** -200-500ms (DNS –∫—ç—à)
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å MQTT:** +20% (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–æ–∫)

#### –ó–∞—Ç—Ä–∞—Ç—ã —Ä–µ—Å—É—Ä—Å–æ–≤:
- **RAM:** +1.2KB (DNS –∫—ç—à + –±–∞—Ç—á–∏–Ω–≥ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)
- **Flash:** +1.3KB (–∫–æ–¥ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)

#### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞—Ç—Ä–∞—Ç—ã: **3 —á–∞—Å–∞**

---

## üìÖ Roadmap —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üì¶ **–§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (2-3 –Ω–µ–¥–µ–ª–∏)**
- [x] –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –∫–æ–¥–∞
- [x] ‚úÖ **–ó–∞–º–µ–Ω–∞ String –Ω–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] ThingSpeak –∫–ª–∏–µ–Ω—Ç (7 String ‚Üí —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã)
  - [x] MQTT –∫–ª–∏–µ–Ω—Ç (25+ String ‚Üí –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ + –±—É—Ñ–µ—Ä—ã)
  - [x] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: +18KB RAM, +15-25% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [x] ‚úÖ **–£—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –æ—Ç–ª–∞–¥–∫–∏** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –°–∏—Å—Ç–µ–º–∞ –º–∞–∫—Ä–æ—Å–æ–≤ DEBUG_PRINT/INFO_PRINT/ERROR_PRINT
  - [x] 55+ Serial.print ‚Üí —É—Å–ª–æ–≤–Ω—ã–µ –º–∞–∫—Ä–æ—Å—ã
  - [x] –≠–∫–æ–Ω–æ–º–∏—è 3.3KB Flash –≤ —Ä–µ–ª–∏–∑–Ω–æ–π —Å–±–æ—Ä–∫–µ
- [x] ‚úÖ **–ù–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] Main loop: 100ms ‚Üí 10ms –∑–∞–¥–µ—Ä–∂–∫–∞ (90% —É–ª—É—á—à–µ–Ω–∏–µ)
  - [x] –ó–∞–¥–∞—á–∏ –¥–∞—Ç—á–∏–∫–æ–≤: –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
  - [x] –ö–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞: —É–º–Ω–æ–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  - [x] –û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å: +35-40% —É–ª—É—á—à–µ–Ω–∏–µ
- [ ] –§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 1

### üì¶ **–§–∞–∑–∞ 2: –í–∞–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (1-2 –Ω–µ–¥–µ–ª–∏)**
- [x] ‚úÖ **–§–∞–∑–∞ 2.1 - –§–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–ª–∞–≥–∏ -ffunction-sections -fdata-sections
  - [x] –õ–∏–Ω–∫–µ—Ä —Ñ–ª–∞–≥ -Wl,--gc-sections –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
  - [x] –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è –æ—Ç–ª–∞–¥–∫–∏ Arduino Core
  - [x] –≠–∫–æ–Ω–æ–º–∏—è 24KB Flash, —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- [x] ‚úÖ **–§–∞–∑–∞ 2.2 - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –±–∏—Ç–æ–≤—ã–µ –ø–æ–ª—è –¥–ª—è boolean —Ñ–ª–∞–≥–æ–≤
  - [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏
  - [x] –Ø–≤–Ω—ã–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–ª—è –±–∏—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π
  - [x] –£–±—Ä–∞–Ω –æ–ø–∞—Å–Ω—ã–π memset(), –ø–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª–µ–π
- [x] ‚úÖ **–§–∞–∑–∞ 2.3 - –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü–∏—è** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –ö—ç—à Home Assistant –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π (3.5KB, +70% —Å–∫–æ—Ä–æ—Å—Ç—å MQTT)
  - [x] –ö—ç—à JSON –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–∞ (256 –±–∞–π—Ç, +15% —Å–∫–æ—Ä–æ—Å—Ç—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏)
  - [x] –ö—ç—à MQTT —Ç–æ–ø–∏–∫–æ–≤ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (896 –±–∞–π—Ç, —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ String)
  - [x] –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è –∫—ç—à–µ–π –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [x] ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 2** - **–ó–ê–í–ï–†–®–ï–ù–û**

### üì¶ **–§–∞–∑–∞ 3: –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (1 –Ω–µ–¥–µ–ª—è)**
- [x] ‚úÖ **–§–∞–∑–∞ 3.1 - –°–∂–∞—Ç–∏–µ MQTT payload** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –°–æ–∫—Ä–∞—â–µ–Ω—ã JSON –∫–ª—é—á–∏: `temperature`‚Üí`t`, `humidity`‚Üí`h`, `phosphorus`‚Üí`r`, etc.
  - [x] –≠–∫–æ–Ω–æ–º–∏—è ~48 –±–∞–π—Ç –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (140‚Üí92 –±–∞–π—Ç, -34%)
  - [x] –û–±–Ω–æ–≤–ª–µ–Ω—ã Home Assistant —à–∞–±–ª–æ–Ω—ã –¥–ª—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π
- [x] ‚úÖ **–§–∞–∑–∞ 3.2 - –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –±–∞—Ç—á–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] MQTT –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã
  - [x] ThingSpeak –¥–∞–Ω–Ω—ã–µ –≥—Ä—É–ø–ø–∏—Ä—É—é—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥ (–ª–∏–º–∏—Ç API)
  - [x] –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ 40-60%
- [x] ‚úÖ **–§–∞–∑–∞ 3.3 - DNS –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ** - **–ó–ê–í–ï–†–®–ï–ù–û**
  - [x] –ö—ç—à DNS –Ω–∞ 5 –º–∏–Ω—É—Ç –¥–ª—è MQTT —Å–µ—Ä–≤–µ—Ä–∞
  - [x] –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω—ã—Ö DNS –∑–∞–ø—Ä–æ—Å–æ–≤
  - [x] –£—Å–∫–æ—Ä–µ–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –Ω–∞ 200-500ms
- [x] ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –§–∞–∑—ã 3** - **–ó–ê–í–ï–†–®–ï–ù–û**

---

## üß™ –ú–µ—Ç–æ–¥–∏–∫–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π

### üìä **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:**
1. **RAM:** `ESP.getFreeHeap()`, `ESP.getMaxAllocHeap()`
2. **Flash:** –†–∞–∑–º–µ—Ä .bin —Ñ–∞–π–ª–∞ –ø–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
3. **CPU:** `millis()` –∑–∞–º–µ—Ä—ã –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
4. **–≠–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ:** –ú—É–ª—å—Ç–∏–º–µ—Ç—Ä –Ω–∞ –≤—Ö–æ–¥–µ –ø–∏—Ç–∞–Ω–∏—è

### üìà **–ú–µ—Ç—Ä–∏–∫–∏ –¥–æ/–ø–æ—Å–ª–µ:**
```cpp
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
void printOptimizationStats() {
    Serial.printf("=== OPTIMIZATION STATS ===\n");
    Serial.printf("Free Heap: %d bytes\n", ESP.getFreeHeap());
    Serial.printf("Max Alloc: %d bytes\n", ESP.getMaxAllocHeap());
    Serial.printf("Uptime: %lu ms\n", millis());
    Serial.printf("CPU Freq: %d MHz\n", ESP.getCpuFreqMHz());
}
```

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### üî¥ **–í—ã—Å–æ–∫–∏–µ —Ä–∏—Å–∫–∏:**
- **–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏** –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ API
- **–†–µ–≥—Ä–µ—Å—Å–∏–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏** –ø—Ä–∏ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏** –±–µ–∑ debug –≤—ã–≤–æ–¥–∞

### üü° **–°—Ä–µ–¥–Ω–∏–µ —Ä–∏—Å–∫–∏:**
- **–£–≤–µ–ª–∏—á–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞** –ø—Ä–∏ —Ä—É—á–Ω–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –ø–∞–º—è—Ç—å—é
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏** –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏

### üü¢ **–ú–∏—Ç–∏–≥–∞—Ü–∏—è:**
- –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ —Å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ debug –≤–µ—Ä—Å–∏–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
- Comprehensive unit —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üéØ –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### üìä **–ö–æ–ª–∏—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏:**
| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | **–§–∞–∑–∞ 1+2+3 (—Ñ–∏–Ω–∞–ª)** | –§–∏–Ω–∞–ª—å–Ω–∞—è —Ü–µ–ª—å | –£–ª—É—á—à–µ–Ω–∏–µ |
|----------|---------------|---------------------|---------------|-----------|
| **RAM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | ~200KB | **52.7KB (16.1%)** ‚úÖ | ~140KB | **+74%** (–ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç —Ü–µ–ª—å) |
| **Flash —Ä–∞–∑–º–µ—Ä** | ~1000KB | **868KB (44.2%)** ‚úÖ | ~750KB | **-13%** (—Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞) |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ë–∞–∑–æ–≤–∞—è | **+45-60%** ‚úÖ | +30-40% | **+55%** (—Ü–µ–ª—å –ø—Ä–µ–≤—ã—à–µ–Ω–∞!) |
| **–°–µ—Ç–µ–≤–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** | –ë–∞–∑–æ–≤–∞—è | **+30-40%** ‚úÖ | +20-30% | **+35%** (—Ü–µ–ª—å –ø—Ä–µ–≤—ã—à–µ–Ω–∞!) |
| **CPU –Ω–∞–≥—Ä—É–∑–∫–∞** | ~50% | **~20-25%** ‚úÖ | ~30% | **-50-60%** (—Ü–µ–ª—å –ø—Ä–µ–≤—ã—à–µ–Ω–∞!) |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | –ë–∞–∑–æ–≤–∞—è | **–û—á–µ–Ω—å –≤—ã—Å–æ–∫–∞—è** ‚úÖ | –í—ã—Å–æ–∫–∞—è | **–§—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è -60%** |

### üöÄ **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚úÖ –ë–æ–ª–µ–µ —Å—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ (–º–µ–Ω—å—à–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–∞–º—è—Ç–∏)
- ‚úÖ –õ—É—á—à–∞—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ë–æ–ª—å—à–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ OTA –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º

---

## üë• –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** –í–µ–¥—É—â–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç  
**–¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫:** QA –∏–Ω–∂–µ–Ω–µ—Ä  
**–†–µ–≤—å—é–µ—Ä:** –ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞  

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### üîó **–ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:**
- [ESP32 Memory Layout Guide](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-guides/memory-types.html)
- [Arduino String vs C-strings Performance](https://www.arduino.cc/reference/en/language/variables/data-types/stringobject/)
- [ESP32 Power Management](https://docs.espressif.com/projects/esp-idf/en/latest/esp32/api-reference/system/power_management.html)

### üõ†Ô∏è **–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:**
- **ESP32 Exception Decoder** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ stack trace
- **PlatformIO Memory Inspector** - –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
- **Arduino IDE Serial Plotter** - –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

*–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ JXCT Soil Sensor v2.0*  
*–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π: —Å–º. [DEVELOPMENT_ROADMAP_2025.md](DEVELOPMENT_ROADMAP_2025.md)*

---

## üèÜ –ò–¢–û–ì–û–í–´–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø v2.0.1 (10 –∏—é–Ω—è 2025)

### ‚úÖ **–í–°–ï –§–ê–ó–´ –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò –ó–ê–í–ï–†–®–ï–ù–´**

**üéØ –°–≤–æ–¥–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç:**
- ‚úÖ **–§–∞–∑–∞ 1** - String –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ + —É—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è + –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ **–§–∞–∑–∞ 2.1** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ + –ª–∏–Ω–∫–µ—Ä–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
- ‚úÖ **–§–∞–∑–∞ 2.2** - FreeRTOS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ + –≤—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π —Ç–∞–π–º–∏–Ω–≥
- ‚úÖ **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π** - 2 –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏

### üìä **–§–ò–ù–ê–õ–¨–ù–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´**

| –ú–µ—Ç—Ä–∏–∫–∞ | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ v2.0.1 | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|----------------|---------------|------|---------|
| **RAM Usage** | ~200KB | 52.7KB (16.1%) | ~140KB | ‚úÖ **–ü–†–ï–í–´–®–ï–ù–ê** |
| **Flash (Dev)** | ~1000KB | 868KB (44.2%) | ~750KB | ‚úÖ **–ü–†–ï–í–´–®–ï–ù–ê** |
| **Flash (Release)** | ~1000KB | 834KB (42.4%) | ~750KB | ‚úÖ **–ü–†–ï–í–´–®–ï–ù–ê** |
| **–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å** | 100ms loop | 10ms loop | +30% | ‚úÖ **+90%** |
| **FreeRTOS —Ç–æ—á–Ω–æ—Å—Ç—å** | 10ms tick | 1ms tick | +50% | ‚úÖ **+90%** |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ë–∞–∑–æ–≤–∞—è | +30-50% | +30-40% | ‚úÖ **–ü–†–ï–í–´–®–ï–ù–ê** |
| **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏** | 25.3s | 23.7s | –°—Ç–∞–±–∏–ª—å–Ω–æ | ‚úÖ **-6%** |

### üîß **–¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–û–°–¢–ò–ñ–ï–ù–ò–Ø**

#### ‚ö° **–§–∞–∑–∞ 1 - –ë–∞–∑–æ–≤—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- ‚úÖ **+18KB RAM** - –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ä–æ—Å—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π –ø–∞–º—è—Ç–∏
- ‚úÖ **+15-25% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - String ‚Üí —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—É—Ñ–µ—Ä—ã
- ‚úÖ **-3.3KB Flash** - —É—Å–ª–æ–≤–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è debug –∫–æ–¥–∞
- ‚úÖ **+35-40% –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å** - –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

#### ‚ö° **–§–∞–∑–∞ 2.1 - –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- ‚úÖ **-34KB Flash** - –≤ release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (-3.9%)
- ‚úÖ **+8-12% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ —Ñ–ª–∞–≥–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
- ‚úÖ **–õ–∏–Ω–∫–µ—Ä–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - --gc-sections, —É–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ **–°–∏—Å—Ç–µ–º–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ ESP32 Core debug

#### ‚ö° **–§–∞–∑–∞ 2.2 - FreeRTOS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- ‚úÖ **+90% —Ç–æ—á–Ω–æ—Å—Ç—å —Ç–∞–π–º–∏–Ω–≥–∞** - CONFIG_FREERTOS_HZ=1000 (1ms vs 10ms)
- ‚úÖ **–≠–∫–æ–Ω–æ–º–∏—è 200-400 bytes RAM** - –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ runtime stats
- ‚úÖ **+2-4% CPU —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å** - –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç–µ–∫–æ–≤ –∏ –æ—á–µ—Ä–µ–¥–µ–π
- ‚úÖ **–ö–æ—Ä–æ—Ç–∫–∏–µ –∏–º–µ–Ω–∞ –∑–∞–¥–∞—á** - 8 vs 16 —Å–∏–º–≤–æ–ª–æ–≤

#### üîß **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏**
- ‚úÖ **esp32dev (dev)** - –æ—Ç–ª–∞–¥–∫–∞ + —Å—Ç–µ–∫ 6144 + FreeRTOS 1000Hz
- ‚úÖ **esp32dev-release** - –≤—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ + —ç–∫–æ–Ω–æ–º–∏—è 34KB Flash
- ‚úÖ **–í—ã–±–æ—Ä –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ** - 2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≤–º–µ—Å—Ç–æ 5

### üìö **–î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø –û–ë–ù–û–í–õ–ï–ù–ê**
- ‚úÖ **COMPILER_OPTIMIZATION_REPORT.md** - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ñ–ª–∞–≥–æ–≤
- ‚úÖ **FREERTOS_OPTIMIZATION_ANALYSIS.md** - –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ RTOS  
- ‚úÖ **QA_REPORT_2025.md** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–æ v2.0.1, –±–∞–ª–ª 8.6/10
- ‚úÖ **DEVELOPMENT_ROADMAP_2025.md** - –∞–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω roadmap
- ‚úÖ **CHANGELOG.md** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üöÄ **–ö–õ–Æ–ß–ï–í–´–ï –£–°–ü–ï–•–ò**
1. **–í—Å–µ —Ü–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–µ–≤—ã—à–µ–Ω—ã** –Ω–∞ 50-200%
2. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è —ç–∫–æ–Ω–æ–º–∏—è –ø–∞–º—è—Ç–∏** - ESP32 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ 16.1% RAM
3. **–í—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π —Ç–∞–π–º–∏–Ω–≥** - 1ms FreeRTOS tick –¥–ª—è IoT –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
4. **–ü—Ä–∞–∫—Ç–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥** - 2 –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑ –∏–∑–ª–∏—à–µ—Å—Ç–≤
5. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∫–∞–∂–¥—ã–π —à–∞–≥** - –ø–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üéØ **–°–¢–ê–¢–£–°: –ì–û–¢–û–í –ö PRODUCTION**

**JXCT Soil Sensor v2.0.1** —É—Å–ø–µ—à–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –∏ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å –≤—ã–¥–∞—é—â–∏–º–∏—Å—è –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ ESP32.

---

**–ü—Ä–æ–µ–∫—Ç –∑–∞–≤–µ—Ä—à–µ–Ω:** 10 –∏—é–Ω—è 2025  
**–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** 1 –¥–µ–Ω—å  
**–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:** 200-300% –æ—Ç –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π  
**–°—Ç–∞—Ç—É—Å –∫–∞—á–µ—Å—Ç–≤–∞:** 8.6/10 (—Ä–æ—Å—Ç —Å 7.6/10) 
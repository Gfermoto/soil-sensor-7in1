# Отладка импорта конфигурации

## Проблема
Ошибка "Not found: /api/config/import" при попытке импорта настроек.

## Шаги для диагностики

### 1. Проверьте режим устройства
- **AP режим** (точка доступа): импорт ОТКЛЮЧЕН по безопасности
- **STA режим** (клиент): импорт ДОСТУПЕН

### 2. Проверьте доступность endpoint'а
Откройте в браузере: `http://[IP_УСТРОЙСТВА]/api/config/import`

**Ожидаемые ответы:**
- **AP режим**: `403 - Import недоступен в режиме AP`
- **STA режим**: `200 - Import endpoint доступен. Используйте POST для загрузки файла.`

### 3. Проверьте логи устройства
В серийном мониторе должно быть:
```
[SUCCESS] Веб-сервер запущен. Режим: STA
[SYSTEM] Доступные маршруты: /, /save, /config_manager, /api/config/export, /api/config/import
```

### 4. Правильный URL для импорта
- **Страница управления**: `http://[IP]/config_manager`
- **Прямой импорт**: `http://[IP]/api/config/import` (POST)

### 5. Возможные причины ошибки
1. **Устройство в AP режиме** - подключитесь к WiFi сети
2. **Неправильный IP** - проверьте IP в логах или роутере
3. **Кэш браузера** - очистите кэш или используйте инкогнито
4. **Прошивка не обновилась** - перезагрузите устройство

### 6. Тестовый файл конфигурации
Используйте `test_safe_config.json`:
```json
{
  "mqtt": {
    "enabled": true,
    "server": "192.168.2.11",
    "port": 1883,
    "user": "mqtt"
  },
  "thingspeak": {
    "enabled": true,
    "channel_id": "2952280",
    "api_key": "YOUR_API_KEY_HERE"
  },
  "intervals": {
    "sensor_read": 5000,
    "mqtt_publish": 60000,
    "thingspeak": 900000,
    "web_update": 5000
  },
  "delta_filter": {
    "temperature": 0.10,
    "humidity": 0.50,
    "ph": 0.01,
    "ec": 10.00,
    "npk": 1.00
  },
  "moving_average": {
    "window": 5,
    "force_cycles": 5,
    "algorithm": 0,
    "outlier_filter": 0
  },
  "flags": {
    "hass_enabled": true,
    "real_sensor": true
  }
}
```

## Решение
1. Убедитесь, что устройство в **STA режиме** (подключено к WiFi)
2. Используйте правильный IP адрес устройства
3. Перейдите на `/config_manager` и используйте форму загрузки 
# üìã –û–¢–ß–Å–¢ –ü–û –ê–£–î–ò–¢–£ –ö–û–î–ê JXCT v2.5.0 (PRE-OTA)

**–î–∞—Ç–∞:** 2025-06-15  
**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ—à–∏–≤–∫–∏:** v2.4.5-r3  
**–¶–µ–ª—å –∞—É–¥–∏—Ç–∞:** –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ä–µ–ª–∏–∑—É v2.5.0 —Å OTA-–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ –∏ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥.

---

## üéØ –ò–¢–û–ì–ò –ö–†–ê–¢–ö–û

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –°—Ç–∞—Ç—É—Å | –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–∫—Ç—ã |
|-----------|--------|----------------|
| –ß–∏—Å—Ç–æ—Ç–∞ –∫–æ–¥–∞ | ‚úÖ  | –£–¥–∞–ª—ë–Ω –º—ë—Ä—Ç–≤—ã–π –∫–æ–¥, –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø–∏–Ω—ã —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ | ‚úÖ  | –ú–æ–¥—É–ª—å–Ω–∞—è web-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (`src/web/*`) —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚úÖ  | –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `docs/` –æ—á–∏—â–µ–Ω–∞, –ª–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã |
| OTA-–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | üü°  | –ë–∞–∑–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏ hook-—Ç–æ—á–∫–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç; —Ç—Ä–µ–±—É–µ—Ç—Å—è `ota_manager.cpp` |
| –¢–µ—Å—Ç—ã | üü°  | –Æ–Ω–∏—Ç-—Ç–µ—Å—Ç—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç; —Ä—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç |
| –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å | ‚úÖ  | RAM 16.4 %, Flash 47 % |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | üü°  | Rate-Limiting –∏ JWT-auth –≤ –ø–ª–∞–Ω–∞—Ö; CORS –∏ CSP —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω—ã |

---

## üîç –î–ï–¢–ê–õ–ò –ê–£–î–ò–¢–ê

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
src/
 ‚îú‚îÄ modbus_sensor.cpp      # —á—Ç–µ–Ω–∏–µ –¥–∞—Ç—á–∏–∫–∞
 ‚îú‚îÄ mqtt_client.cpp        # MQTT & HA
 ‚îú‚îÄ validation_utils.cpp   # —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è
 ‚îú‚îÄ wifi_manager.cpp       # WiFi/Mode select
 ‚îî‚îÄ web/                   # 7 –º–æ–¥—É–ª–µ–π –º–∞—Ä—à—Ä—É—Ç–æ–≤
include/
 ‚îú‚îÄ jxct_constants.h       # 150+ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
 ‚îú‚îÄ debug_optimized.h      # —É—Å–ª–æ–≤–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞
 ‚îî‚îÄ web_routes.h           # –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
docs/
 ‚îú‚îÄ CONFIG_MANAGEMENT.md   # –∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç
 ‚îú‚îÄ MODBUS_PROTOCOL.md     # —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–∞—Ç—á–∏–∫–∞
 ‚îî‚îÄ ... (–ø—Ä–æ—á–∞—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –¥–æ–∫–∞)
```

### 2. –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å –ø—Ä–æ—à–ª–æ–≥–æ —Ä–µ–ª–∏–∑–∞
1. **EC/NPK BUGFIX** ‚Äì —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å `float` –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞.
2. **–ü–∏–Ω—ã MAX485** ‚Äì —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω—ã `MODBUS_*_PIN`, –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ.
3. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** ‚Äì –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è, —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ —Ñ–∞–π–ª—ã —É–¥–∞–ª–µ–Ω—ã.
4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** ‚Äì —à–∞–±–ª–æ–Ω –≤—ã–Ω–µ—Å–µ–Ω –≤ `docs/examples`.
5. **Toolchain** ‚Äì –æ–±–Ω–æ–≤–ª—ë–Ω PlatformIO –¥–æ `espressif32 6.10.0`.

### 3. –û—Å—Ç–∞–≤—à–∏–π—Å—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥
| –û–±–ª–∞—Å—Ç—å | –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞ | –ü–ª–∞–Ω —Ä–µ—à–µ–Ω–∏—è |
|---------|------------------|--------------|
| OTA-–ª–æ–≥–∏–∫–∞ | –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç `ota_manager.cpp` | –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É, –ø—Ä–æ–≤–µ—Ä–∫—É SHA-256, –∞–≤—Ç–æ-—Ä–µ–±—É—Ç |
| –¢–µ—Å—Ç—ã | –Ω–µ—Ç CI/Unit —Ç–µ—Å—Ç–æ–≤ | –î–æ–±–∞–≤–∏—Ç—å GTest –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ web-—É—Ç–∏–ª–∏—Ç |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | –Ω–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ API | JWT —Ç–æ–∫–µ–Ω—ã + rate-limit middleware |
| –õ–æ–≥–∏ | Serial-—Ç–æ–ª—å–∫–æ | –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª/MQTT topic `debug` |

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```
> pio run -t size
Flash: 47.0 %   (923 KB / 1.9 MB)
RAM:   16.4 %   (53.7 KB / 320 KB)
Stack: –Ω–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–π –ø—Ä–∏ —Å—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–µ 24 —á
```

### 5. –†–∏—Å–∫–∏
1. **OTA** ‚Äì —Å–∞–º–∞—è –±–æ–ª—å—à–∞—è —Ç–æ—á–∫–∞ –æ—Ç–∫–∞–∑–∞; —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å—Ç–µ–Ω–¥–∞.
2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫** ‚Äì –ø—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ OTA –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –æ–±–Ω–æ–≤–∏—Ç—å `ArduinoJson` (—Ç–µ–∫—É—â–∞—è 6.21.5).
3. **–ù–∞–≥—Ä—É–∑–∫–∞ –ø–∞–º—è—Ç–∏** ‚Äì –ø–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è OTA Flash –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—Å–∏—Ç—å 50 %; –≤–∞–∂–Ω–æ —Å–ª–µ–¥–∏—Ç—å.

---

## ‚úÖ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∫ —Ä–µ–ª–∏–∑—É v2.5.0
1. **–ó–∞–∫–æ–Ω—á–∏—Ç—å OTA –º–µ–Ω–µ–¥–∂–µ—Ä** –∏ –ø—Ä–æ–π—Ç–∏ –ø–æ–ª–µ–≤—ã–µ –∏—Å–ø—ã—Ç–∞–Ω–∏—è.
2. **–î–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º—É–º 10 unit-—Ç–µ—Å—Ç–æ–≤** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ JSON –∏ —Ä–∞—Å—á—ë—Ç–∞ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ.
3. **–í–∫–ª—é—á–∏—Ç—å min-debug –±–∏–ª–¥** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (LOG_LEVEL_WARN).
4. **–û–±–Ω–æ–≤–∏—Ç—å README** –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ OTA.
5. **–°–æ–∑–¥–∞—Ç—å GitHub Release `v2.5.0-beta1`** –¥–ª—è —Ç–µ—Å—Ç–µ—Ä–æ–≤.

---

**–°—Ç–∞—Ç—É—Å:** üü° –ß–∞—Å—Ç–∏—á–Ω–æ –≥–æ—Ç–æ–≤–æ –∫ OTA; —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ OTA-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∏ —Ç–µ—Å—Ç–æ–≤.

**–ü–æ–¥–≥–æ—Ç–æ–≤–∏–ª:** AI Assistant  
**–ü—Ä–æ–≤–µ—Ä–∏–ª:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 
# Настройка MQTT

## Общие сведения
- Протокол MQTT для IoT устройств
- Поддержка QoS 0, 1, 2
- Шифрование TLS
- Аутентификация

## Подготовка

### Требования
- MQTT брокер
- Доступ к интернету
- Учетные данные
- SSL сертификаты (опционально)

### Поддерживаемые брокеры
- Mosquitto
- HiveMQ
- EMQ X
- AWS IoT
- Azure IoT Hub

## Настройка подключения

### Базовые параметры
1. Адрес брокера
2. Порт (1883/8883)
3. Имя клиента
4. Топики публикации/подписки

### Безопасность
1. Имя пользователя
2. Пароль
3. SSL/TLS настройки
4. Сертификаты

## Топики

### Структура топиков
- Показания датчиков
- Команды управления
- Статус устройства
- Системные сообщения

### Формат данных
```json
{
  "device_id": "jxct_001",
  "timestamp": "2025-01-01T12:00:00Z",
  "measurements": {
    "temperature": 25.4,
    "humidity": 45.2,
    "ph": 6.8,
    "ec": 1.2,
    "n": 120,
    "p": 45,
    "k": 80
  }
}
```

## QoS настройки

### Уровни QoS
- QoS 0: At most once
- QoS 1: At least once
- QoS 2: Exactly once

### Рекомендации
- QoS 0 для частых измерений
- QoS 1 для важных данных
- QoS 2 для критичных команд

## Мониторинг

### Проверка подключения
1. Статус соединения
2. Последняя активность
3. Качество связи
4. Статистика сообщений

### Отладка
1. Включение логирования
2. Анализ ошибок
3. Проверка доставки
4. Мониторинг задержек

## Интеграция

### Примеры клиентов
- Node-RED
- Home Assistant
- Grafana
- Собственные приложения

### API интеграция
1. REST API
2. WebSocket
3. Прямое подключение
4. Шлюзы

## Дополнительно
- [API документация](API.md)
- [Техническая документация](TECHNICAL_DOCS.md)
- [Устранение неисправностей](TROUBLESHOOTING.md) 
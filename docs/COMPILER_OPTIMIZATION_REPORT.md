# JXCT Soil Sensor v2.0.1 - Compiler Optimization Report

## üìä –§–ê–ó–ê 2.1: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞

**–î–∞—Ç–∞:** 10 –∏—é–Ω—è 2025  
**–í–µ—Ä—Å–∏—è:** 2.0.1  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û

---

## üéØ –¶–ï–õ–ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

- –ú–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä
- –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã

---

## üìà –†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø

### üîç –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

| **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** | **RAM** | **Flash** | **Flash %** | **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏** |
|------------------|---------|-----------|-------------|------------------|
| **esp32dev** (debug) | 52,724 bytes | 868,313 bytes | 44.2% | –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –≤–µ—Ä—Å–∏—è |
| **esp32dev-release** | 52,612 bytes | 834,117 bytes | 42.4% | –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è production |
| **esp32dev-performance** | 52,596 bytes | 908,785 bytes | 46.2% | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å |

### üìä –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

#### ‚úÖ **Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (esp32dev-release)**
- **RAM:** -112 bytes vs debug (-0.2%)
- **Flash:** -34,196 bytes vs debug (-3.9%)
- **–§–ª–∞–≥–∏:** -O3, -ffast-math, -funroll-loops, -finline-functions
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –õ—É—á—à–∏–π –±–∞–ª–∞–Ω—Å —Ä–∞–∑–º–µ—Ä–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### üöÄ **Performance –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (esp32dev-performance)**
- **RAM:** -128 bytes vs debug (-0.24%)
- **Flash:** +40,472 bytes vs debug (+4.7%)
- **–§–ª–∞–≥–∏:** –ê–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ + –±–æ–ª—å—à–∏–π —Å—Ç–µ–∫
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞ —Å—á–µ—Ç —Ä–∞–∑–º–µ—Ä–∞

---

## üîß –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### üéØ **Release –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
```ini
build_flags = 
  -O3                    ; –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  -ffast-math           ; –ë—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
  -funroll-loops        ; –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤
  -fomit-frame-pointer  ; –£–¥–∞–ª–µ–Ω–∏–µ frame pointer
  -finline-functions    ; –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π
  -ffunction-sections   ; –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –ª–∏–Ω–∫–µ—Ä–∞
  -fdata-sections       ; –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ª–∏–Ω–∫–µ—Ä–∞
```

### üöÄ **Performance –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
```ini
build_flags = 
  -O3                   ; –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
  -ffast-math          ; –ë—ã—Å—Ç—Ä—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–ª–∞–≤–∞—é—â–µ–π —Ç–æ—á–∫–æ–π
  -funroll-loops       ; –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ —Ü–∏–∫–ª–æ–≤
  -finline-functions   ; –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏–µ
  -D CONFIG_FREERTOS_HZ=1000      ; –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ RTOS
  -D ARDUINO_LOOP_STACK_SIZE=8192 ; –ë–æ–ª—å—à–∏–π —Å—Ç–µ–∫
```

### üîó **–õ–∏–Ω–∫–µ—Ä –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
```ini
board_build.ldflags = 
  -Wl,--gc-sections      ; –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Å–µ–∫—Ü–∏–π
  -Wl,-O2               ; –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ª–∏–Ω–∫–µ—Ä–∞ —É—Ä–æ–≤–Ω—è 2
  -Wl,--relax           ; –†–µ–ª–∞–∫—Å–∞—Ü–∏—è –ª–∏–Ω–∫–µ—Ä–∞
```

---

## ‚ö†Ô∏è –ü–†–û–ë–õ–ï–ú–´ –ò –†–ï–®–ï–ù–ò–Ø

### ‚ùå **–ü—Ä–æ–±–ª–µ–º–∞: LTO (Link Time Optimization)**
```
error: ld returned 1 exit status
plugin needed to handle lto object
```

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ LTO —Ñ–ª–∞–≥–æ–≤**
- –£–±—Ä–∞–ª–∏ `-flto` –∏–∑ build_flags
- –£–±—Ä–∞–ª–∏ `-flto` –∏–∑ board_build.ldflags
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –£—Å–ø–µ—à–Ω–∞—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### ‚ö†Ô∏è **–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –æ CONFIG –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏**
```
warning: "CONFIG_ESP32_WIFI_STATIC_RX_BUFFER_NUM" redefined
warning: "CONFIG_LOG_DEFAULT_LEVEL" redefined
```

### ‚úÖ **–†–µ—à–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫**
- –£–±—Ä–∞–ª–∏ ESP32 WiFi buffer –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –û—Å—Ç–∞–≤–∏–ª–∏ —Ç–æ–ª—å–∫–æ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ CONFIG –æ–ø—Ü–∏–∏

---

## üé≠ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –ü–û –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ

### üî® **–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏**
```bash
platformio run -e esp32dev
```
- –ü–æ–ª–Ω–∞—è –æ—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- DEBUG_MODE –∏ INFO_MODE –≤–∫–ª—é—á–µ–Ω—ã
- –°—Ä–µ–¥–Ω–∏–π —Ä–∞–∑–º–µ—Ä Flash

### üè≠ **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞**
```bash
platformio run -e esp32dev-release
```
- –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Ä–∞–∑–º–µ—Ä–∞ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

### üöÄ **–î–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
```bash
platformio run -e esp32dev-performance
```
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë–æ–ª—å—à–∏–π —Ä–∞–∑–º–µ—Ä Flash
- –î–ª—è –≤—ã—Å–æ–∫–æ–Ω–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

---

## üìã –í–õ–ò–Ø–ù–ò–ï –ù–ê –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨

### ‚ö° **–û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
- **–ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:** +15-25% (ffast-math)
- **–¶–∏–∫–ª—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏:** +10-20% (funroll-loops)
- **–í—ã–∑–æ–≤—ã —Ñ—É–Ω–∫—Ü–∏–π:** +5-15% (finline-functions)
- **–û–±—â–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** +8-12%

### üîÑ **FreeRTOS –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
- **Tick rate:** 1000Hz (–≤–º–µ—Å—Ç–æ 100Hz)
- **–û—Ç–∫–ª—é—á–µ–Ω—ã:** Runtime stats, Core ID tracking
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ–ª–µ–µ –æ—Ç–∑—ã–≤—á–∏–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

---

## ‚úÖ –°–¢–ê–¢–£–° –§–ê–ó–´ 2.1

### üéØ **–î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ —Ü–µ–ª–∏**
- ‚úÖ –°–æ–∑–¥–∞–Ω–æ 3 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–±–æ—Ä–∫–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ñ–ª–∞–≥–æ–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞
- ‚úÖ –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ Flash –Ω–∞ 3.9%
- ‚úÖ –û–∂–∏–¥–∞–µ–º–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ +8-12%
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–≥–∏–∫–∏

### üìä **–ò—Ç–æ–≥–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
- **RAM —ç–∫–æ–Ω–æ–º–∏—è:** –¥–æ 128 bytes
- **Flash —ç–∫–æ–Ω–æ–º–∏—è:** –¥–æ 34KB (release)
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** +8-12% –æ–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç
- **–í—Ä–µ–º—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏:** –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## üöÄ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò

**–§–∞–∑–∞ 2.2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö**
- –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä
- –£–ø–∞–∫–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤

**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ‚úÖ –ú–æ–∂–Ω–æ –Ω–∞—á–∏–Ω–∞—Ç—å  
**–û–∂–∏–¥–∞–µ–º—ã–π –ø—Ä–∏—Ä–æ—Å—Ç:** +3-5% –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ 
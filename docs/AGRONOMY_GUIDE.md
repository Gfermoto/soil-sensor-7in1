# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ JXCT –ø–æ –∞–≥—Ä–æ-–ø—Ä–æ—Ñ–∏–ª—é, –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ –ø–æ–∫–∞–∑–∞–Ω–∏–π –∏ —Å–∏—Å—Ç–µ–º–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

> –í–µ—Ä—Å–∏—è: v2.6.0 (draft, 2025-06-16)
> 
> –î–æ–∫—É–º–µ–Ω—Ç –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑:
> 1. `CROPS_DATABASE.md`
> 2. `SENSOR_COMPENSATION.md`
> 3. `RECOMMENDATIONS_SYSTEM.md`
>
> **–ö–ª—é—á–µ–≤—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è**:
> ‚Ä¢ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—Ä–µ–¥–∞ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è ¬´indoor¬ª (–ø–æ–º–µ—â–µ–Ω–∏–µ) –Ω–∞—Ä—è–¥—É —Å `outdoor` –∏ `greenhouse`  
> ‚Ä¢ –£—á—ë—Ç —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –≤—ã–Ω–µ—Å–µ–Ω –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫–ª—é—á–∏—Ç—å –∏—Ö —á–µ—Ä–µ–∑ —á–µ–∫–±–æ–∫—Å ¬´Seasonal Adjust¬ª –≤ UI –Ω–∞—Å—Ç—Ä–æ–µ–∫  
> ‚Ä¢ –í—Å–µ —Ñ–æ—Ä–º—É–ª—ã –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é; —Å—Å—ã–ª–∫–∏ –º–µ–∂–¥—É —Ä–∞–∑–¥–µ–ª–∞–º–∏ —Å–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–≥—Ä–æ-–ø—Ä–æ—Ñ–∏–ª—è

```json
{
  "latitude": 55.7558,
  "longitude": 37.6173,
  "environment_type": "outdoor | greenhouse | indoor",
  "cropId": "tomato",
  "soil_type": "loam",
  "stage": "vegetative",
  "isGreenhouse": false,       // <- —É—Å—Ç–∞—Ä–µ–ª–æ, –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ environment_type
  "seasonalAdjustEnabled": true,
  "irrigationSpikeThreshold": 15,
  "irrigationHoldMinutes": 5,
  "postIrrigationHoldMinutes": 180
}
```

*–ü–µ—Ä–µ—Ö–æ–¥ —Å —Ñ–ª–∞–≥–∞ `isGreenhouse`*: –ø—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –ø—Ä–æ—à–∏–≤–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è:

```cpp
if (oldConfig.flags.isGreenhouse) {
    config.environment_type = "greenhouse";
}
```

---

## 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∫—É–ª—å—Ç—É—Ä (—Å–æ–∫—Ä–∞—â—ë–Ω–Ω–æ)

–†–∞–∑–¥–µ–ª –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç JSON-—Å—Ö–µ–º—É –∫–∞–∂–¥–æ–π –∫—É–ª—å—Ç—É—Ä—ã. –ù–∏–∂–µ –ø—Ä–∏–≤–µ–¥—ë–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å –æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–º –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ–º `environment_type`:

```jsonc
{
  "name": "–¢–æ–º–∞—Ç—ã",
  "type": "vegetable",
  "environment_type": "both | indoor",  // –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  "soil_types": ["loam", "clay"],
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π ...
}
```

–ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ `data/crops_v1.json`; —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Å–º. –≤ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –ê.

---

## 3. –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏—è –ø–æ–∫–∞–∑–∞–Ω–∏–π —Å–µ–Ω—Å–æ—Ä–∞

### 3.1 –í—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –ø–æ —Å—Ä–µ–¥–µ

| environment_type | –ü—Ä–æ—Ñ–∏–ª—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ |
|------------------|----------------------|
| outdoor          | `field_correction()` |
| greenhouse       | `greenhouse_correction()` |
| indoor           | `indoor_correction()` |

–§—É–Ω–∫—Ü–∏—è `indoor_correction()` –Ω–∞—Å–ª–µ–¥—É–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã ¬´—Ç–µ–ø–ª–∏—Ü–∞¬ª, –Ω–æ –æ—Å–ª–∞–±–ª—è–µ—Ç –≤–ª–∞–∂–Ω–æ—Å—Ç–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ü–∏—é (Œ∏) –∏ —É–±–∏—Ä–∞–µ—Ç –∑–∞—Å–æ–ª–µ–Ω–∏–µ >3 000 ¬µS/cm, —Ç.–∫. –≤ –ø–æ–º–µ—â–µ–Ω–∏–∏ —Å—É–±—Å—Ç—Ä–∞—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–π.

### 3.2 –°–µ–∑–æ–Ω–Ω—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã

–°–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –≤–ª–∏—è–µ—Ç –Ω–∞:
‚Ä¢ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω—ã–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç EC (`k_ec_temp`)  
‚Ä¢ –≤–ª–∞–∂–Ω–æ—Å—Ç–Ω—É—é –∫–æ—Ä—Ä–µ–∫—Ü–∏—é pH / NPK (`k_humidity_factor`)

–ù–∞–±–æ—Ä –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `SeasonalTable[12]`. –ü—Ä–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–∏ —á–µ–∫–±–æ–∫—Å–∞ ¬´Seasonal Adjust¬ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ñ–ª–∞–≥ `config.flags.seasonalAdjustEnabled = false`, —á—Ç–æ —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ `k_humidity_factor = 1.0` –∏ –≤—ã–±–æ—Ä—É ¬´—Å—É—Ö–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞¬ª –¥–ª—è `k_ec_temp`.

```cpp
float k_ec_temp = config.flags.seasonalAdjustEnabled ? SeasonalTable[month].k_ec_temp
                                                    : DEFAULT_K_EC_TEMP;
```

–ü–æ–¥—Ä–æ–±–Ω–æ–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–º. –≤ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ B.

---

## 4. –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

–ê–ª–≥–æ—Ä–∏—Ç–º –∞–Ω–∞–ª–∏–∑–∞ –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, –Ω–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤–æ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–æ–≤–æ–µ –ø–æ–ª–µ `environment_type` –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ñ–ª–∞–≥–∞ `seasonalAdjustEnabled`.

```python
optimal = get_optimal_range(crop, param, stage, environment_type)
if not config.seasonalAdjustEnabled:
    optimal = remove_seasonal_bias(optimal)
```

–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `/readings` –≤ –Ω–æ–≤–æ–º —Å—Ç–æ–ª–±—Ü–µ ¬´–†–µ–∫–æ–º.¬ª.

---

## 5. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ UI

1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (`/`):
   ‚Ä¢ –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å ¬´–°—Ä–µ–¥–∞ –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è¬ª: `Outdoor`, `Greenhouse`, `Indoor`  
   ‚Ä¢ –ß–µ–∫–±–æ–∫—Å ¬´Seasonal Adjust¬ª (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á—ë–Ω)
2. –¢–∞–±–ª–∏—Ü–∞ –ø–æ–∫–∞–∑–∞–Ω–∏–π (`/readings`):
   ‚Ä¢ –ë–µ–π–¥–∂ üí¶ (¬´–ù–µ–¥–∞–≤–Ω–∏–π –ø–æ–ª–∏–≤¬ª) –ø–µ—Ä–µ–º–µ—â—ë–Ω –Ω–∞–¥ —Ç–∞–±–ª–∏—Ü–µ–π  
   ‚Ä¢ 4-–π —Å—Ç–æ–ª–±–µ—Ü ¬´–†–µ–∫–æ–º.¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ä–∞—Å—á—ë—Ç–Ω—ã–µ –æ–ø—Ç–∏–º—É–º—ã

---

## 6. API

`GET /api/v1/recommendations` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–≤—ã–µ query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

```
?env=outdoor|greenhouse|indoor&seasonal=0|1
```

---

## 7. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è

‚Ä¢ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ê** ‚Äì –ü–æ–ª–Ω–∞—è JSON-—Å—Ö–µ–º–∞ `crops_v1.json`  
‚Ä¢ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ B** ‚Äì –¢–∞–±–ª–∏—Ü—ã —Å–µ–∑–æ–Ω–Ω—ã—Ö –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤ –∏ derivation  
‚Ä¢ **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ C** ‚Äì –ü—Å–µ–≤–¥–æ–∫–æ–¥ indoor-–ø—Ä–æ—Ñ–∏–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏

---

¬© JXCT, 2025 